{
  "id": "{{service.name}}",
  "cpus": {{service.cpus}},
  "mem": {{service.mem}},
  "disk": {{service.disk}},
  "acceptedResourceRoles": [
    "*"
  ],
  "networks": [
    {
      "mode": "container/bridge"
    }
  ],
  "portDefinitions": [],
  "container": {
    "type": "DOCKER",
    "docker": {
      "forcePullImage": false,
      "image": "{{resource.assets.container.docker.image}}",
      "parameters": [],
      "privileged": false
    },
    "portMappings": [
      {
        "containerPort": {{networking.container_port}},
        "protocol": "tcp"          
      }
    ]
  },
  "env": {
      {{#placement.region}}
      "SERVICE_REGION": "{{placement.region}}",
      {{/placement.region}}
       "KEYCLOAK_HOSTNAME": "{{environment.KEYCLOAK_HOSTNAME}}",
       "KEYCLOAK_USERNAME": "{{environment.KEYCLOAK_USER}}",
       "KEYCLOAK_PASSWORD": {
          "secret": "keycloakpassword"
       }
  },
  "secrets": {
    "keycloakpassword": {
      "source": "{{environment.KEYCLOAK_PASSWORD}}"
    }
  },
  "labels": {
    "HAPROXY_GROUP": "external",
    "HAPROXY_0_ENABLED": "true",
    "HAPROXY_0_REDIRECT_TO_HTTPS": "true",
    "HAPROXY_0_VHOST": "{{environment.KEYCLOAK_HOSTNAME}}",
    "HAPROXY_0_PATH": "/{{service.name}}"
    "DCOS_SERVICE_SCHEME": "http",
    "DCOS_SERVICE_NAME": "{{service.name}}"
  }
}
